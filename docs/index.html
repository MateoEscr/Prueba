<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Nuestra Historia ğŸ’š</title>

<style>

/* ============================
   AJUSTES GENERALES
============================ */
html, body {
  margin: 0;
  padding: 0;
  overflow-x: hidden !important;
  width: 100%;
}

body {
  font-family: "Helvetica", sans-serif;
  color: #ffffff;
  background: #0c1f0c;
  position: relative;
}

/* ============================
   FONDO CON EMOJIS
============================ */
body::before {
  content: "ğŸ’š ğŸ’š ğŸ’š ğŸ’š ğŸ’š ğŸ’š ğŸ’š ğŸ’š ğŸ’š ğŸ’š";
  font-size: 42px;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  opacity: .12;
  pointer-events: none;
  z-index: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-wrap: wrap;
}

/* ============================
   PANTALLA DE CARGA
============================ */
#loader {
  position: fixed;
  inset: 0;
  background: #0c1f0c;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  color: white;
  animation: fadeOut 2s ease forwards;
  animation-delay: 1.8s;
}

#loader .heart {
  font-size: 60px;
  animation: beat 0.8s infinite;
}

@keyframes beat {
  0% { transform: scale(1); }
  30% { transform: scale(1.3); }
  60% { transform: scale(1); }
}

@keyframes fadeOut {
  to {
    opacity: 0;
    visibility: hidden;
  }
}

/* ============================
   PANTALLA â€œÃbreme si me quieresâ€
============================ */
#gate {
  position: fixed;
  inset: 0;
  background: #0c1f0c;
  z-index: 9998;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

#gate h1 {
  font-size: 32px;
  color: white;
  z-index: 2;
}

#gate button {
  background: #1fae4f;
  color: white;
  padding: 14px 26px;
  border: none;
  border-radius: 14px;
  font-size: 20px;
  margin-top: 14px;
}

/* ============================
   CONTENIDO
============================ */
#content {
  padding: 20px;
  padding-top: 40px;
  position: relative;
  z-index: 2;
  display: none;
}

/* ============================
   REPRODUCTOR COMPACTO (para ambos)
============================ */
.compact-player {
  background: rgba(0,0,0,0.28);
  padding: 14px;
  border-radius: 16px;
  width: 94%;
  max-width: 360px;
  margin: 0 auto;
  display: flex;
  align-items: center;
  gap: 14px;
  box-shadow: 0 8px 22px rgba(0,0,0,.22);
}

.cover-wrap {
  width: 70px;
  height: 70px;
  border-radius: 12px;
  overflow: hidden;
  position: relative;
}

.cover-wrap img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.cover-wrap.playing img {
  animation: rotateCover 4s linear infinite;
}

@keyframes rotateCover {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.play-overlay {
  position: absolute;
  inset: 0;
  display: flex;
  justify-content: center;
  align-items: center;
}

.play-circle {
  width: 34px;
  height: 34px;
  border-radius: 50%;
  background: rgba(0,0,0,.55);
  display: flex;
  justify-content: center;
  align-items: center;
}

.player-title {
  font-size: 15px;
}

.player-time {
  font-size: 12px;
  opacity: .8;
}

.small-progress input[type=range] {
  width: 100px;
}

/* ============================
   TÃTULO PRINCIPAL (GRANDE)
============================ */
.main-title {
  font-size: 42px;
  font-weight: bold;
  text-align: center;
  margin-top: 25px;
  margin-bottom: 10px;
  line-height: 1.2;
}

/* ============================
   CARRUSEL FIX
============================ */
.carousel {
  position: relative;
  width: 100%;
  overflow: hidden;
  margin-top: 20px;
}

.carousel-stage {
  width: 100%;
  min-height: 360px; /* RESERVA DE ESPACIO */
  display: flex;
  justify-content: center;
  align-items: center;
}

.slide {
  display: none;
  width: 100%;
  height: auto;
}

.slide.active {
  display: block;
}

.slide img {
  width: 100%;
  height: auto;
  max-height: 70vh;
  object-fit: contain;
  border-radius: 16px;
  box-shadow: 0 10px 26px rgba(0,0,0,0.22);
}

/* ============================
   TIMELINE
============================ */
.timeline {
  margin-top: 40px;
  padding: 20px;
  border-left: 3px solid #26c55a;
}

.event {
  margin-bottom: 25px;
  padding-left: 14px;
  position: relative;
}

.event::before {
  content: "ğŸ’š";
  position: absolute;
  left: -27px;
  top: 0;
  font-size: 20px;
}

.event strong {
  font-size: 18px;
  color: #9effa8;
}

</style>
</head>
<body>

<!-- ============================
     LOADER
============================ -->
<div id="loader">
  <div class="heart">ğŸ’š</div>
  <p>Cargando...</p>
</div>

<!-- ============================
     GATE
============================ -->
<div id="gate">
  <h1>Ãbreme si me quieres ğŸ’š</h1>
  <button id="openBtn">Abrir</button>
</div>

<!-- ============================
     CONTENIDO REAL
============================ -->
<div id="content">

  <!-- â€œEscÃºchame primeroâ€ -->
  <h2 style="text-align:center;margin-bottom:12px;">EscÃºchame primero ğŸ’š</h2>

  <div class="compact-player" id="introPlayer">
      <div class="cover-wrap" id="introCover">
        <img src="images/portada.jpeg">
        <div class="play-overlay">
          <div class="play-circle" id="introPlayBtn">
            â–¶
          </div>
        </div>
      </div>

      <div>
        <div class="player-title">Un mensaje importanteâ€¦</div>
        <div class="player-time">
          <span id="introCur">0:00</span> / 
          <span id="introDur">0:00</span>
        </div>
        <div class="small-progress">
          <input type="range" id="introRange" min="0" max="100" value="0">
        </div>
      </div>
  </div>

  <!-- TÃ­tulo principal -->
  <div class="main-title">Nuestra Historia ğŸ’š</div>

  <!-- Reproductor principal -->
  <div class="compact-player" style="margin-top:10px;" id="mainPlayer">
      <div class="cover-wrap" id="mainCover">
        <img src="images/portada.jpeg">
        <div class="play-overlay">
          <div class="play-circle" id="mainPlayBtn">â–¶</div>
        </div>
      </div>

      <div>
        <div class="player-title">Nuestra canciÃ³n</div>
        <div class="player-time">
          <span id="mainCur">0:00</span> / 
          <span id="mainDur">0:00</span>
        </div>
        <div class="small-progress">
          <input type="range" id="mainRange" min="0" max="100" value="0">
        </div>
      </div>
  </div>

  <!-- Carrusel -->
  <div class="carousel">
    <div class="carousel-stage">

      <!-- Se muestran todas tus imÃ¡genes -->
      <div class="slide active"><img src="images/IMG_7604.jpeg"></div>
      <div class="slide"><img src="images/IMG_1209.jpeg"></div>
      <div class="slide"><img src="images/IMG_0991.jpeg"></div>
      <div class="slide"><img src="images/IMG_1102.jpeg"></div>
      <div class="slide"><img src="images/IMG_1204.jpeg"></div>
      <div class="slide"><img src="images/IMG_0948.jpeg"></div>
      <div class="slide"><img src="images/IMG_0595.jpeg"></div>
      <div class="slide"><img src="images/IMG_0562.jpeg"></div>
      <div class="slide"><img src="images/IMG_0413.jpeg"></div>
      <div class="slide"><img src="images/IMG_4945.jpeg"></div>
      <div class="slide"><img src="images/IMG_5003.jpeg"></div>
      <div class="slide"><img src="images/IMG_8777.jpeg"></div>

    </div>
  </div>

  <!-- Timeline -->
  <div class="timeline">
    <div class="event">
      <strong>2 julio 2025</strong><br>
      Empezamos a salir ğŸ’š
    </div>
    <div class="event">
      <strong>15 julio 2025</strong><br>
      ConocÃ­ a tus padres por primera vez.
    </div>
    <div class="event">
      <strong>22 septiembre 2025</strong><br>
      Nuestro viaje mÃ¡s especial juntos.
    </div>
  </div>

</div>

<!-- ============================
     SCRIPTS
============================ -->

<script>
/* --------------------------------------
   GATE
-------------------------------------- */
document.getElementById("openBtn").onclick = () => {
  document.getElementById("gate").style.display = "none";
  document.getElementById("content").style.display = "block";
};

/* --------------------------------------
   CARRUSEL
-------------------------------------- */
let slides = document.querySelectorAll(".slide");
let idx = 0;

function nextSlide() {
  slides[idx].classList.remove("active");
  idx = (idx + 1) % slides.length;
  slides[idx].classList.add("active");
}

setInterval(nextSlide, 2800);

/* --------------------------------------
   COMÃšN PARA AMBOS REPRODUCTORES
-------------------------------------- */
function setupPlayer(audioFile, playBtnId, coverId, curId, durId, rangeId) {
  const audio = new Audio(audioFile);
  audio.preload = "metadata";

  const btn = document.getElementById(playBtnId);
  const cover = document.getElementById(coverId);
  const curT = document.getElementById(curId);
  const durT = document.getElementById(durId);
  const rng = document.getElementById(rangeId);

  function fmt(t){
    if(!isFinite(t)) return "0:00";
    const m = Math.floor(t/60);
    const s = Math.floor(t%60).toString().padStart(2,"0");
    return `${m}:${s}`;
  }

  btn.onclick = () => {
    if(audio.paused){
      audio.play();
      cover.classList.add("playing");
      btn.innerHTML = "âšâš";
    } else {
      audio.pause();
      cover.classList.remove("playing");
      btn.innerHTML = "â–¶";
    }
  };

  audio.onloadedmetadata = () => {
    durT.textContent = fmt(audio.duration);
  };

  audio.ontimeupdate = () => {
    curT.textContent = fmt(audio.currentTime);
    rng.value = (audio.currentTime / audio.duration) * 100;
  };

  rng.oninput = () => {
    audio.currentTime = (rng.value/100) * audio.duration;
  };

  audio.onended = () => {
    cover.classList.remove("playing");
    btn.innerHTML = "â–¶";
  };

  return audio;
}

/* Reproductor 1: â€œEscÃºchame primeroâ€ */
setupPlayer(
  "images/instrucciones.mp3",
  "introPlayBtn",
  "introCover",
  "introCur",
  "introDur",
  "introRange"
);

/* Reproductor 2: CanciÃ³n principal */
setupPlayer(
  "images/musica.mp3",
  "mainPlayBtn",
  "mainCover",
  "mainCur",
  "mainDur",
  "mainRange"
);

</script>

</body>
</html>
