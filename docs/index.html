<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Los mejores 6 meses de mi vida</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;700;900&display=swap" rel="stylesheet">
    <style>
        /* ---------- Variables y reset (DISE√ëO VERDE) ---------- */
        :root{
            --bg: #F1F8E9; /* Verde Matcha clarito */
            --accent: #66BB6A; /* Verde principal */
            --accent-dark: #388E3C;
            --text: #1B5E20; 
            --glass: rgba(255, 255, 255, 0.7);
            --glass-strong: rgba(255, 255, 255, 0.9);
            --card-shadow: 0 8px 32px rgba(102, 187, 106, 0.15);
            --rounded: 20px;
            --pink-shadow: rgba(129, 199, 132, 0.4); 
            --green-shadow: rgba(76, 175, 80, 0.3);
        }
        *{box-sizing:border-box}
        html,body{height:100%; overflow-x:hidden;}
        body{ 
            margin:0; 
            font-family: 'Quicksand', Inter, "Segoe UI", Roboto, Arial, sans-serif; 
            background: var(--bg); 
            color:var(--text); 
            -webkit-font-smoothing:antialiased; 
            -moz-osx-font-smoothing:grayscale; 
            -webkit-touch-callout:none; 
        }
        
        /* ---------- BARRA DE PROGRESO DE LECTURA ---------- */
        #progressBar {
            position: fixed; top: 0; left: 0; height: 4px; 
            background: linear-gradient(90deg, #ff6b6b, var(--accent)); 
            width: 0%; z-index: 10000; transition: width 0.1s linear; 
            box-shadow: 0 0 5px rgba(0,0,0,0.2);
        }
        
        /* ---------- Bot√≥n Lluvia de Amor ---------- */
        #loveButton {
            position: fixed; bottom: 25px; right: 25px; width: 60px; height: 60px;
            border-radius: 50%; background: var(--accent); border: 4px solid white;
            font-size: 30px; z-index: 9999; box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            display: flex; align-items: center; justify-content: center; cursor: pointer;
            -webkit-tap-highlight-color: transparent; transition: transform 0.2s;
        }
        #loveButton:active { transform: scale(0.9); }
        .floating-heart { position: fixed; pointer-events: none; z-index: 10000; font-size: 24px; animation: flyUp 2s forwards ease-out; }
        @keyframes flyUp { 0% { transform: translateY(0) scale(1); opacity: 1; } 100% { transform: translateY(-200px) translateX(var(--random-x)) rotate(var(--random-deg)); opacity: 0; } }

        /* ---------- Typewriter Styling ---------- */
        .type-me { opacity: 0; }
        .type-me.visible { opacity: 1; }
        .typewriter-cursor { border-right: 2px solid var(--accent); animation: blinkCursor 0.7s infinite; }
        @keyframes blinkCursor { 50% { border-color: transparent; } }

        /* ---------- Post-its ---------- */
        .postit-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; margin: 30px 0; }
        .postit { width: 160px; padding: 15px; background: #fff9c4; box-shadow: 3px 3px 10px rgba(0,0,0,0.1); font-size: 0.9rem; transform: rotate(-2deg); transition: 0.3s; color: #5d4037; border-bottom-right-radius: 40px 5px; font-weight: 600; text-align: center; }
        .postit:nth-child(even) { transform: rotate(2deg); background: #f1f8e9; }
        .postit:hover { transform: scale(1.05) rotate(0deg); }

        /* ---------- Rasca y Gana ---------- */
        .scratch-section { margin: 40px auto; max-width: 400px; text-align: center; }
        #scratch-container { position: relative; width: 300px; height: 150px; margin: 0 auto; border-radius: 15px; overflow: hidden; background: #fff; box-shadow: var(--card-shadow); border: 2px solid var(--accent); }
        #scratch-canvas { position: absolute; top: 0; left: 0; cursor: crosshair; touch-action: none; z-index: 2; }
        .scratch-content { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; padding: 20px; text-align: center; position: relative; z-index: 1; }

        /* ---------- Fondo emojis (RESTAURADO) ---------- */
        #emoji-bg{ position:fixed; inset:0; z-index:-3; pointer-events:none; overflow:hidden; }
        .emoji{ position:absolute; opacity:0.07; font-size: calc(14px + 1.4vw); transform-origin:center; animation: float linear infinite; animation-duration: calc(10s + var(--random-duration)); animation-delay: calc(var(--random-delay) * -1s); }
        @keyframes float{ from{ transform: translateY(110vh) rotate(0deg); } to{ transform: translateY(-10vh) rotate(360deg); } }

        /* ---------- Loader (VERDE) ---------- */
        #loader{ position:fixed; inset:0; display:flex; flex-direction:column; align-items:center; justify-content:center; background: var(--bg); z-index:9999; transition: opacity .5s ease, visibility .5s; }
        #loader.hidden{ opacity:0; visibility:hidden; }

        /* ---------- Confirm (SISTEMA ORIGINAL) ---------- */
        #confirm{ position:fixed; inset:0; display:grid; place-items:center; z-index:9998; padding: 20px; }
        .confirm-card{ width:100%; max-width:520px; border-radius:18px; padding:18px; background:linear-gradient(180deg,rgba(255,255,255,0.75),rgba(255,255,255,0.5)); box-shadow:var(--card-shadow); backdrop-filter:blur(6px); display:flex; flex-direction:column; gap:12px; align-items:center; }
        #openBtn { padding: 10px 30px; font-size: 1.2rem; font-weight: 700; border-radius: 8px; border: none; background: var(--accent); color: white; cursor: pointer; transition: 0.2s; }
        #openBtn:hover { background: var(--accent-dark); }

        /* ---------- Players (STICKY) ---------- */
        .player-wrapper {
            display: flex; justify-content: center; position: sticky; top: 10px; z-index: 1000; margin-bottom: 20px; pointer-events: none; width: 100%;
        }
        .compact-player {
            display: flex; align-items: center; gap: 12px; width: auto; max-width: fit-content; padding: 8px 15px; border-radius: var(--rounded); background: rgba(255, 255, 255, 0.85); backdrop-filter: blur(10px); box-shadow: var(--card-shadow); border: 1px solid rgba(102, 187, 106, 0.2); pointer-events: auto;
        }
        .cover-wrap { width: 50px; height: 50px; flex: 0 0 50px; border-radius: 8px; overflow: hidden; }
        .cover-wrap img{ width:100%; height:100%; object-fit:cover; display:block; transition: transform 0.8s linear; }
        .play-circle{ width:36px; height:36px; border-radius:50%; display:grid; place-items:center; background:rgba(255,255,255,0.12); border:2px solid rgba(255,255,255,0.15); cursor:pointer; }
        .player-meta{ display:flex; flex-direction:column; gap:6px; }
        .player-title{ font-size:0.95rem; font-weight:700; margin:0; }
        .small-progress input[type="range"]{ width:100%; -webkit-appearance:none; height:6px; background:linear-gradient(90deg,var(--accent),rgba(76,175,80,.6)); border-radius: 6px; }

        /* ---------- Main & Text Cards ---------- */
        .container{ max-width:1100px; margin:0 auto; padding:28px 16px 80px; position:relative; z-index:1; }
        h1{ font-size:3em; margin:0; line-height:1.05; text-align:center; }
        .title-wrap.visible h1 { text-shadow: 2px 2px 4px var(--pink-shadow), -2px -2px 4px var(--green-shadow); transform: scale(1.02); transition: transform 1s, text-shadow 1s ease-out 1s; }
        .text-card { max-width: 820px; margin: 20px auto 30px; padding: 20px; border-radius: var(--rounded); background: var(--glass-strong); box-shadow: var(--card-shadow); backdrop-filter: blur(6px); }
        p.message{ font-size:1.1rem; color:rgba(0,0,0,0.7); margin:14px 0; }

        /* ---------- Carousel & Slider AB ---------- */
        .carousel{ width:100%; max-width:820px; margin:10px auto 28px; position:relative; display: flex; flex-direction: column; align-items: center; }
        .carousel-stage{ position:relative; display:flex; align-items:center; justify-content:center; width: 100%; height:360px; overflow:hidden; touch-action: pan-y; }
        .slide{ position:absolute; inset:0; display:flex; align-items:center; justify-content:center; opacity:0; transition: opacity .8s ease; }
        .slide.active{ opacity:1; }
        .slide img{ max-width:100%; max-height:100%; object-fit:contain; border-radius:12px; box-shadow:0 12px 30px rgba(0,0,0,.12); }
        .arrow button{ background:var(--glass-strong); border-radius:50%; border:none; width:44px; height:44px; display:grid; place-items:center; box-shadow:var(--card-shadow); cursor:pointer; }
        .arrow-left{ position:absolute; top:50%; left:6px; transform:translateY(-50%); z-index: 10; }
        .arrow-right{ position:absolute; top:50%; right:6px; transform:translateY(-50%); z-index: 10; }
        .dot { width: 8px; height: 8px; border-radius: 50%; background: rgba(0,0,0,0.2); transition: 0.3s; cursor: pointer; flex-shrink: 0; margin: 0 4px; }
        .dot.active { background: var(--accent); transform: scale(1.2); }

        /* Slider AB Spacing Fix */
        #perspectiveStage .slide > div { 
            display: flex; flex-direction: column; gap: 8px; width: 100%; height: 100%; 
            box-shadow: 0 8px 25px rgba(0,0,0,0.1); border-radius: 12px; overflow: hidden; background: white;
        }
        #perspectiveStage .slide img { width: 100% !important; height: calc(50% - 4px) !important; object-fit: cover; }

        /* ---------- Collage & Counter ---------- */
        .collage-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); grid-gap: 4px; }
        .collage-item img { width: 100%; border-radius: var(--rounded); box-shadow: 0 4px 10px rgba(0,0,0,0.1); transition: 0.3s; }
        .counter-card{ width: 100%; max-width: 400px; text-align:center; padding: 20px 10px; border-radius: var(--rounded); background: var(--glass-strong); box-shadow: var(--card-shadow); margin: 0 auto; }
        .counter-wrap { display: flex; justify-content: center; align-items: flex-start; gap: 5px; }
        .counter-segment { display: inline-block; min-width: 50px; text-align: center; }
        .counter-digit-group { display: block; font-size: 1.8rem; color: var(--accent); font-weight: 900; }
        .counter-digit-group.change-animation { transform: scale(1.2); }

        /* ---------- Timeline ---------- */
        .timeline { display: flex; flex-direction: column; gap: 12px; }
        .event { background: white; border-radius: 12px; padding: 12px 14px; box-shadow: var(--card-shadow); border-left: 4px solid var(--accent); opacity: 0; transform: translateY(20px); transition: 0.5s; display: flex; gap: 12px; }
        .event.visible { opacity: 1; transform: none; }
        .event > .dot { width: 12px; height: 12px; border-radius: 50%; background: var(--accent); margin-top: 6px; flex-shrink: 0; }

        .lightbox { display: none; position: fixed; z-index: 10001; inset: 0; background: rgba(0,0,0,0.9); backdrop-filter: blur(5px); justify-content: center; align-items: center; }
        .lightbox-content { max-width: 90%; max-height: 80vh; border-radius: 12px; }
        .hidden-section { opacity: 0; transform: translateY(30px); transition: 1s ease-out; }
        .hidden-section.visible { opacity: 1; transform: none; }
    </style>
</head>
<body>
    <div id="progressBar"></div> 
    <div id="emoji-bg"></div>
    <button id="loveButton">üíö</button>

    <div id="loader"> 
        <span>üíö</span> 
        <div style="font-weight:600;color: var(--accent-dark)">Cargando algo hecho por el tontooo de tu novio...</div> 
    </div>

    <div id="confirm"> 
        <div class="confirm-card"> 
            <h2>√Åbreme si eres la ni√±a guapa, lista, agradable, amable, cari√±osa, te gustan los takis y tienes el novio mas suertudo del mundo por tenerte (SI T√ö, CARLOTA DUR√ÅN GARC√çA.) üíö</h2> 
            <div class="compact-player" id="messagePlayerConfirm"> 
                <div class="cover-wrap" id="messageCoverWrapConfirm"> 
                    <img src="images/portada.JPG"> 
                    <div class="play-overlay"><div class="play-circle" id="messagePlayOverlayConfirm"></div></div>
                </div> 
                <div class="player-meta"> 
                    <div class="player-title">Tienes un mensajitoooo</div> 
                    <div class="player-time"><span id="messageTimeCurC">0:00</span> / <span id="messageTimeDurC">0:00</span></div> 
                    <div class="small-progress"><input id="messageProgressC" type="range" min="0" max="100"></div> 
                </div> 
            </div> 
            <button id="openBtn">Abrir</button> 
        </div> 
    </div>

    <div class="container" id="mainContent" style="display:none;"> 
        <div class="player-wrapper">
            <div class="compact-player"> 
                <div class="cover-wrap" id="coverWrapMain"> 
                    <img src="images/portada.JPG"> 
                    <div class="play-overlay"><div class="play-circle" id="playOverlayMain"></div></div>
                </div> 
                <div class="player-meta"> 
                    <div class="player-title">Jejejejejejej ü•π</div> 
                    <div class="player-time"><span id="timeCurM">0:00</span> / <span id="timeDurM">0:00</span></div> 
                    <div class="small-progress"><input id="progressM" type="range" min="0" max="100"></div> 
                </div> 
            </div> 
        </div>

        <div class="title-wrap hidden-section" id="titleSection"> 
            <h1>¬øTe cre√≠as que el concierto era lo √∫nico que iba a regalarte? Seguro que no jeje porque sabes lo tonto que soy... Es una super tonter√≠a pero espero que te guste MUCHO</h1> 
        </div>

        <div class="text-card" id="reasonsCard"> 
            <p class="message">Hola mi esquiadora favorita, te echo mucho de menos pero hoy es un d√≠a S√öPER ESPECIAL...</p> 
            <p class="message">Por desgracia estamos a unos 615km pero gracias a que tenemos internet y tu a un novio ingeniero pesado...</p> 
            
            <p class="message type-me">1. Porque contigo puedo ser realmente yo, y me sacas una sonrisa hasta cuando nadie puede hacerme sonre√≠r</p> 
            <p class="message type-me">2. Porque tienes el alma m√°s pura que he visto nunca, y todo lo haces con una sonrisa que alegra hasta el peor de los d√≠as</p> 
            <p class="message type-me">3. Porque me haces la persona m√°s feliz del mundo y estoy muy orgulloso de ti ‚ù§Ô∏è</p> 
            <p class="message type-me">4. Porque dia a dia te esfuerzas por hacer y decir cosas que no te apetecen o no son lo que m√°s quieres ü•π‚ù§Ô∏è</p> 
            <p class="message type-me">5. Porque me incluyes en todo y me haces sentirme DEMASIADO c√≥modo y feliz en todo momento que paso contigoüòÅüòá‚ù§Ô∏èüòã</p> 
            <p class="message type-me">6. Porque si tengo que aprender de alguien, es de ti. Eres la hermana que todo hermano querr√≠a tener, la hija que todo padre y la nieta que todo abuelo (No pongo novia porque aunque cualquier hombre querr√≠a, u r mine)</p> 
            <p class="message type-me">7. Porque ahora que me he parado a pensarlo, mi suerte no es nada de 1 entre 1.000.000 ni nada por el estilo. Eres 1/1 y eso demuestra que no puedo tener mucha m√°s suerte. No puedes ser mejor hermana mayor. Gracias por incluirme en tu familia, apoyarme y hacer que aprenda a ser una mejor persona d√≠a a d√≠a ‚ù§Ô∏è</p> 
            <p class="message type-me">8. Porque siempre sacas lo mejor de m√≠ y me valoras mucho. Porque haces hasta las cosas que menos pueden apetecerte, algo que habla mucho y muy bien de quien y como eres</p> 
            <p class="message type-me">9. Porque no solo eres mi novia, sino que tambi√©n mi mejor amiga y la persona con la que quiero hacerlo todo, incluso hacer nada. Y si esto es as√≠, es por c√≥mo eres. De buena, de maja, de considerada, de risue√±a, interesante, amigable, guapa, atenta, lista, te esfuerzas y haces todo lo mejor posible. Adem√°s, mensajes como el que te respondo hacen mucho, ya que hasta con la idea de que no iba a hacer m√°s me has hecho ponerme a las 11 a terminar 3 ejercicios... en fin. ü©∑</p> 
            <p class="message type-me">10. Porque gracias a ti, lo que me valoras y cuanto me haces saberlo para que me valore a m√≠ mismo, el problema de sobrepensarlo todo va cada vez a menos. Y, en caso de darme, se que tengo una persona para hablar eso o cualquier cosa, y adem√°s es alguien en quien no puedo confiar m√°sü§ó‚ù§Ô∏è</p> 
            <p class="message type-me">11. Porque te admiro.</p> 
            <p class="message type-me">12. Porque no solo me duermo y me despierto pensando y hablandote/leyendo mensajes tuyos, si no que tambi√©n me miro a la mu√±eca y veo un detalle que vale m√°s que mucho dinero. Miro a la l√°mpara y hay otro. En mi armario? Otros dos. En otra caja, chocolates de tu primer partido del Madrid. Todos esos detalles que te parecen "tonter√≠as" pero que a√∫n as√≠ las haces, como podr√°s ver me importan y mucho, y te lo intento agradecer pero igual no lo suficiente. (Aun no sabes porque empieza todo por porque). üòÅ‚ù§Ô∏è</p> 
            <p class="message type-me">13. Porque cualquier d√≠a es autom√°ticamente bueno si estoy o voy a quedar contigo</p> 
            <p class="message type-me">15. Dos semanas mand√°ndote mensaje diario cutie. Fin? Jejeje. Siempre gracias pero ten√≠a que a√±adir hoy que amo como cantas y como te sabes las letras y lo bien que cantas y entonces y pronuncias y entiendes. Todo ‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è. Te quiero, good night peque, descansa üíö</p> 
            <p class="message type-me">14. No empiezo por porque pero si que explico. Si he empezado estos mensajes as√≠ al principio pensaba que era para decirte luego en plan porque te quiero. Pero muy basic no? Ahora creo que pueden haber sido razones (sencillas) que explican porque admiro y quiero, y agradezco a Carlota. <br> Es importante recordar lo que me dijo tu abuelo tambi√©n al conocerle, y toda la raz√≥n que ten√≠a.<br> Agradezco que me hagas una persona mejor cada d√≠a que pasa, agradezco que te preocupes, que seas atenta, que te esfuerzas por expresarte. En fin, todo esto te lo he dicho ya en alguno de los 14 mensajes previos. <br> Con motivo de ayer y algo que he pensado bastante inconscientemente, uso este mensaje para explicar otra vez porque estoy contigo y no con "otra" como me preguntabas ayer. <br> Otra, no me hace feliz. Otra, no me importa como haces t√∫. Otra no tiene la sonrisa bonita que tienes t√∫, ni los ojos oscuros pero en los que me veo reflejado cuando me miras, o t√∫ pelo marr√≥n/negro (depende de la luz) que siempre est√° perfecto y onduladito que tanto me gusta, ni tu habilidad para hacer una foto patata. Tampoco tiene los valores ni la educaci√≥n que tienes t√∫. Ni tu forma de ser que TANTO me gusta y TANTO disfruto todos los d√≠as y que agradezco. <br> Tampoco tienen tu fe, ni la transmiten, ni vive orgullosa de ella como haces t√∫ y algo de lo que estoy muy orgulloso y feliz. <br> No tiene esa atenci√≥n al detalle que me has demostrado tener pese a decir que no te acuerdas de las cosas y eres "menos atenta". <br> No canta ni tanto ni tan bien. No me atrae como haces t√∫. No me importa como me importas t√∫. No me trata como me tratas t√∫. <br> No me ayuda ni me tranquiliza como haces t√∫.</p> 

            <p class="message">GRACIAS. POR TODO. Eres mi todo. Te QUIERO peque üíöüíöüíöüíö</p> 
        </div>

        <div class="postit-container hidden-section">
            <div class="postit">¬°Eres capaz de TODO lo que te propongas! ‚ú®</div>
            <div class="postit" style="background:#e1f5fe">6 meses y contando... üîí</div>
            <div class="postit">Me debes un baile en cuanto vuelvas üíÉ</div>
        </div>

        <div class="carousel hidden-section"> 
            <div class="arrow-left"><button id="prevBtn">‚Äπ</button></div> 
            <div class="carousel-stage" id="stage" onclick="openMainCarouselLightbox()">
                <div class="slide active"><img src="images/IMG_8777.jpeg"></div><div class="slide"><img src="images/IMG_7604.jpeg"></div><div class="slide"><img src="images/IMG_7567.jpeg"></div><div class="slide"><img src="images/IMG_7372.jpeg"></div><div class="slide"><img src="images/IMG_5003.jpeg"></div><div class="slide"><img src="images/IMG_1427.jpeg"></div><div class="slide"><img src="images/f52fc0bf-7153-43cc-abdc-201a14e7431c.jpeg"></div><div class="slide"><img src="images/f051fdc8-7e2a-46e3-a65c-d632f135f325.jpeg"></div><div class="slide"><img src="images/bc9a39ed-631b-43f8-9a86-ca373ff34698.jpeg"></div><div class="slide"><img src="images/IMG_1204.jpeg"></div><div class="slide"><img src="images/IMG_1113.jpeg"></div><div class="slide"><img src="images/a35975e2-9ba2-42fe-8fdf-ab06c0f87336.jpeg"></div><div class="slide"><img src="images/IMG_1097.jpeg"></div><div class="slide"><img src="images/894dc007-6d33-4bd4-bef9-0f419769eb58.jpeg"></div><div class="slide"><img src="images/7fa3e78a-31ea-4964-b4c9-bf778241b46a.jpeg"></div><div class="slide"><img src="images/3dafce51-cfde-4746-9112-f214c3e11876.jpeg"></div><div class="slide"><img src="images/31f14a18-3ecf-466d-97f6-350c24dbdbc5.jpeg"></div><div class="slide"><img src="images/IMG_0991.jpeg"></div><div class="slide"><img src="images/IMG_0951.jpeg"></div><div class="slide"><img src="images/IMG_0594.jpeg"></div><div class="slide"><img src="images/IMG_0567.jpeg"></div><div class="slide"><img src="images/IMG_0411.jpeg"></div><div class="slide"><img src="images/IMG_0056.jpeg"></div><div class="slide"><img src="images/IMG_24_FIX.jpeg"></div><div class="slide"><img src="images/24f8cb99-1774-441a-9c2a-ba494afdbec9.jpeg"></div>
            </div> 
            <div class="arrow-right"><button id="nextBtn">‚Ä∫</button></div> 
            <div class="carousel-dots" id="carouselDots"></div>
        </div>

        <div class="collage-section hidden-section" id="collageSection">
            <h2 style="text-align: center;">Appreciation Post ü´∂</h2>
            <div class="collage-grid" id="photoCollage">
                <div class="collage-item"><img src="images/collage1.jpg"></div><div class="collage-item"><img src="images/collage2.jpg"></div><div class="collage-item"><img src="images/collage3.jpg"></div><div class="collage-item"><img src="images/collage4.jpg"></div><div class="collage-item"><img src="images/collage5.jpg"></div><div class="collage-item"><img src="images/collage6.jpg"></div><div class="collage-item"><img src="images/collage7.jpg"></div><div class="collage-item"><img src="images/collage8.jpg"></div><div class="collage-item"><img src="images/collage9.jpg"></div><div class="collage-item"><img src="images/collage10.jpg"></div><div class="collage-item"><img src="images/collage11.jpg"></div><div class="collage-item"><img src="images/collage12.jpg"></div><div class="collage-item"><img src="images/collage13.jpg"></div><div class="collage-item"><img src="images/collage14.jpg"></div><div class="collage-item"><img src="images/collage15.jpg"></div><div class="collage-item"><img src="images/collage16.jpg"></div><div class="collage-item"><img src="images/collage17.jpg"></div><div class="collage-item"><img src="images/collage18.jpg"></div><div class="collage-item"><img src="images/collage19.jpg"></div><div class="collage-item"><img src="images/collage20.jpg"></div><div class="collage-item"><img src="images/collage21.jpg"></div><div class="collage-item"><img src="images/collage22.JPG"></div><div class="collage-item"><img src="images/collage23.jpg"></div><div class="collage-item"><img src="images/collage24.jpg"></div><div class="collage-item"><img src="images/collage25.PNG"></div><div class="collage-item"><img src="images/collage26.jpg"></div><div class="collage-item"><img src="images/collage27.JPG"></div><div class="collage-item"><img src="images/collage28.jpg"></div><div class="collage-item"><img src="images/collage29.jpg"></div><div class="collage-item"><img src="images/collage30.jpg"></div>
            </div>
        </div>

        <div class="scratch-section hidden-section">
            <h2 style="text-align: center;">Tengo una noticia... (¬°Rasca aqu√≠!) üöÅ</h2>
            <div id="scratch-container">
                <div class="scratch-content">
                    <p style="font-weight: 900; color: var(--accent-dark); margin: 0; font-size: 1.2rem;">¬°DRONE SHOW TICKETS! üåå</p>
                    <p style="font-size: 0.85rem; margin-top: 10px;">S√© que los organizadores lo cancelaron... ¬°pero iremos en cuanto lo reprogramen! ‚ù§Ô∏è</p>
                </div>
                <canvas id="scratch-canvas" width="300" height="150"></canvas>
            </div>
        </div>

        <div class="counter-section hidden-section" id="counterSection">
            <div class="counter-card">
                <div class="fun-fact-text">Parezca m√°s o menos tiempo, llevamos saliendo: </div> 
                <div id="contador"></div> 
            </div>
            <div class="text-card" style="text-align: center; max-width: 500px; margin: 0 auto;">
                <p class="message" style="margin: 0;">Si mis calculos no fallan tendr√≠an que poner 185 d√≠as... son <strong>15.897.600 segundos</strong> en los que has pasado por mi mente. üíö</p>
            </div>
        </div>

        <div class="timeline-wrapper hidden-section" id="timelineWrapper"> 
            <div class="text-card">
                <div class="timeline" id="timeline"> 
                    <div class="event"><div class="dot"></div><div><div class="date">31 de Mayo de 2025</div><div class="desc">Conoc√≠ a la persona m√°s importante (T√ö)</div></div></div> 
                    <div class="event"><div class="dot"></div><div><div class="date">3 de Junio de 2025</div><div class="desc">Nuestra primera cita (y caminata jeje)</div></div></div> 
                    <div class="event"><div class="dot"></div><div><div class="date">2 de Julio 2025</div><div class="desc">Empezamos a salir officially.</div></div></div> 
                    <div class="event"><div class="dot"></div><div><div class="date">30 de Octubre 2025</div><div class="desc">NUESTRO PRIMER VIAJE - LONDON!</div></div></div> 
                    <div class="event"><div class="dot"></div><div><div class="date">2 de Diciembre 2025</div><div class="desc">5 MESES! Y sorpresa en casa</div></div></div>
                </div> 
            </div>
        </div> 

        <div class="carousel hidden-section" id="perspectiveSlider">
            <h2 style="text-align: center; margin-bottom: 25px;">Perspectivas üòÅ</h2>
            <div class="arrow-left"><button id="prevPerspectiveBtn">‚Äπ</button></div> 
            <div class="carousel-stage" id="perspectiveStage"> 
                <div class="slide active"><div onclick="openCurrentPerspectiveLightbox()"><img src="images/AB1-1.jpg"><img src="images/AB1-2.jpg"></div></div>
                <div class="slide"><div onclick="openCurrentPerspectiveLightbox()"><img src="images/AB2-1.jpg"><img src="images/AB2-2.jpg"></div></div>
                <div class="slide"><div onclick="openCurrentPerspectiveLightbox()"><img src="images/AB3-1.jpg"><img src="images/AB3-2.jpg"></div></div>
                <div class="slide"><div onclick="openCurrentPerspectiveLightbox()"><img src="images/AB4-1.jpg"><img src="images/AB4-2.jpg"></div></div>
                <div class="slide"><div onclick="openCurrentPerspectiveLightbox()"><img src="images/AB5-1.jpg"><img src="images/AB5-2.jpg"></div></div>
                <div class="slide"><div onclick="openCurrentPerspectiveLightbox()"><img src="images/AB6-1.jpg"><img src="images/AB6-2.jpg"></div></div>
                <div class="slide"><div onclick="openCurrentPerspectiveLightbox()"><img src="images/AB7-1.jpg"><img src="images/AB7-2.jpg"></div></div>
                <div class="slide"><div onclick="openCurrentPerspectiveLightbox()"><img src="images/AB8-1.jpg"><img src="images/AB8-2.jpg"></div></div>
                <div class="slide"><div onclick="openCurrentPerspectiveLightbox()"><img src="images/AB9-1.jpg"><img src="images/AB9-2.jpg"></div></div>
                <div class="slide"><div onclick="openCurrentPerspectiveLightbox()"><img src="images/AB10-1.jpg"><img src="images/AB10-2.jpg"></div></div>
            </div> 
            <div class="arrow-right"><button id="nextPerspectiveBtn">‚Ä∫</button></div> 
        </div>

        <div class="final-message-card hidden-section">
            Te amo peque√±a. Ma√±ana a esquiar! üíö
        </div>
    </div>
    
    <div id="lightbox" class="lightbox" onclick="this.style.display='none'"><img class="lightbox-content" id="lightboxImage"></div>
    <div id="dualLightbox" class="lightbox" onclick="this.style.display='none'">
        <div style="display:flex; flex-direction:column; gap:10px; width:90%; align-items:center;">
            <img id="dualImageA" style="max-height:45vh; border-radius:10px;"><img id="dualImageB" style="max-height:45vh; border-radius:10px;">
        </div>
    </div>

    <script> 
        /* --- CONFIGURACI√ìN DE AUDIO (RESTAURADA) --- */
        const svgPlay='<svg width="14" height="14" viewBox="0 0 24 24"><path d="M5 3v18l15-9z" fill="#fff"/></svg>'; 
        const svgPause='<svg width="14" height="14" viewBox="0 0 24 24"><rect x="6" y="5" width="4" height="14" fill="#fff"/><rect x="14" y="5" width="4" height="14" fill="#fff"/></svg>'; 
        const messageAudio = new Audio("images/mensaje.mp3"); 
        const audio = new Audio("images/musica.mp3");

        function hapticFeedback(duration = 50) { if ('vibrate' in navigator) navigator.vibrate(duration); }
        function fmt(s){ if(!isFinite(s)) return '0:00'; const m=Math.floor(s/60),sec=Math.floor(s%60).toString().padStart(2,'0'); return `${m}:${sec}`; }

        /* --- TYPEWRITER LOGIC --- */
        function typeWriter(element, text, speed = 40) {
            let i = 0; element.innerHTML = ""; element.classList.add('typewriter-cursor');
            function type() {
                if (i < text.length) { element.innerHTML += text.charAt(i); i++; setTimeout(type, speed); }
                else { element.classList.remove('typewriter-cursor'); }
            }
            type();
        }
        const typeObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting && !entry.target.classList.contains('typed')) {
                    entry.target.classList.add('typed');
                    entry.target.classList.add('visible');
                    typeWriter(entry.target, entry.target.innerText);
                }
            });
        }, { threshold: 0.1 });

        /* --- LLUVIA DE CORAZONES --- */
        document.getElementById('loveButton').onclick = (ev) => {
            hapticFeedback(100);
            for (let i = 0; i < 15; i++) {
                const heart = document.createElement('div'); heart.className = 'floating-heart'; heart.innerHTML = 'üíö';
                const x = ev.clientX || window.innerWidth - 50; const y = ev.clientY || window.innerHeight - 50;
                heart.style.left = x + 'px'; heart.style.top = y + 'px';
                heart.style.setProperty('--random-x', (Math.random() * 200 - 100) + 'px');
                heart.style.setProperty('--random-deg', (Math.random() * 360) + 'deg');
                document.body.appendChild(heart); setTimeout(() => heart.remove(), 2000);
            }
        };

        /* --- RASCA Y GANA --- */
        function initScratch() {
            const can = document.getElementById('scratch-canvas'), ctx = can.getContext('2d');
            ctx.fillStyle = '#66BB6A'; ctx.fillRect(0, 0, 300, 150); ctx.fillStyle = '#fff'; ctx.font = '20px Quicksand'; ctx.textAlign = 'center'; ctx.fillText('¬°RASCA AQU√ç! üëÜ', 150, 85);
            let drawing = false;
            function scratch(e) { if(!drawing) return; const r = can.getBoundingClientRect(), x = (e.clientX || e.touches[0].clientX) - r.left, y = (e.clientY || e.touches[0].clientY) - r.top; ctx.globalCompositeOperation = 'destination-out'; ctx.beginPath(); ctx.arc(x, y, 25, 0, Math.PI * 2); ctx.fill(); }
            can.addEventListener('mousedown', () => drawing = true); can.addEventListener('touchstart', () => drawing = true); window.addEventListener('mouseup', () => drawing = false); can.addEventListener('mousemove', scratch); can.addEventListener('touchmove', scratch);
        }

        /* --- CONTADOR ANIMADO --- */
        const startDate=new Date('2025-07-02T00:00:00+02:00');
        function initCounter() {
            document.getElementById('contador').innerHTML = `<div class="counter-wrap"><span class="counter-segment"><span class="counter-digit-group" id="dVal">0</span><span class="label">D√≠as</span></span><span style="font-size:1.8rem;">/</span><span class="counter-segment"><span class="counter-digit-group" id="hVal">00</span><span class="label">h</span></span><span style="font-size:1.8rem;">:</span><span class="counter-segment"><span class="counter-digit-group" id="mVal">00</span><span class="label">m</span></span><span style="font-size:1.8rem;">:</span><span class="counter-segment"><span class="counter-digit-group" id="sVal">00</span><span class="label">s</span></span></div>`;
        }
        function updateDigit(el, val) { if (el.textContent !== val.toString()) { el.classList.add('change-animation'); el.textContent = val; setTimeout(() => el.classList.remove('change-animation'), 200); } }
        function update() {
            const diff = Math.floor((new Date() - startDate) / 1000);
            updateDigit(document.getElementById('dVal'), Math.floor(diff/86400));
            updateDigit(document.getElementById('hVal'), Math.floor((diff%86400)/3600).toString().padStart(2,'0'));
            updateDigit(document.getElementById('mVal'), Math.floor((diff%3600)/60).toString().padStart(2,'0'));
            updateDigit(document.getElementById('sVal'), (diff%60).toString().padStart(2,'0'));
        }

        /* --- AUDIO LOGIC --- */
        function setupAudio(aud, btn, prog, cur, dur, isMsg) {
            btn.onclick = () => { hapticFeedback(80); if(aud.paused){ aud.play(); btn.innerHTML=svgPause; if(isMsg) audio.pause(); } else { aud.pause(); btn.innerHTML=svgPlay; } };
            aud.ontimeupdate = () => { prog.value = (aud.currentTime/aud.duration)*100; cur.textContent = fmt(aud.currentTime); };
            aud.onloadedmetadata = () => dur.textContent = fmt(aud.duration);
            prog.oninput = () => aud.currentTime = (prog.value/100)*aud.duration;
        }

        /* --- INICIO Y OBSERVERS --- */
        document.getElementById('openBtn').onclick = () => {
            hapticFeedback(150); messageAudio.pause();
            document.getElementById('confirm').style.display = 'none';
            document.getElementById('mainContent').style.display = 'block';
            document.getElementById('titleSection').classList.add('visible'); 
            initScratch();
            document.querySelectorAll('.hidden-section, .event').forEach(s => genObs.observe(s));
            document.querySelectorAll('.type-me').forEach(t => typeObserver.observe(t));
            window.scrollTo(0,0);
        };
        const genObs = new IntersectionObserver(es => es.forEach(e => { if(e.isIntersecting) e.target.classList.add('visible'); }), { threshold: 0.1 });

        window.onload = () => {
            setTimeout(() => document.getElementById('loader').classList.add('hidden'), 1500);
            initCounter(); setInterval(update, 1000);
            setupAudio(messageAudio, document.getElementById('messagePlayOverlayConfirm'), document.getElementById('messageProgressC'), document.getElementById('messageTimeCurC'), document.getElementById('messageTimeDurC'), true);
            setupAudio(audio, document.getElementById('playOverlayMain'), document.getElementById('progressM'), document.getElementById('timeCurM'), document.getElementById('timeDurM'), false);
            // BG Emojis
            const bg = document.getElementById('emoji-bg');
            for(let i=0; i<35; i++){
                const e = document.createElement('div'); e.className='emoji'; e.textContent = i%2===0?'üíö':'üíñ';
                e.style.left=Math.random()*100+'%'; e.style.setProperty('--random-duration', Math.random()*10+'s');
                e.style.setProperty('--random-delay', Math.random()*10+'s'); bg.appendChild(e);
            }
        };

        /* --- CARRUSELES --- */
        function initCarousel(id, prev, next, isMain) {
            let cur = 0; const slides = document.querySelectorAll(`#${id} .slide`);
            const show = (i) => { cur = (i + slides.length) % slides.length; slides.forEach((s,x) => s.classList.toggle('active', x === cur)); if(isMain) updateDots(cur); };
            document.getElementById(prev).onclick = () => { hapticFeedback(50); show(cur-1); };
            document.getElementById(next).onclick = () => { hapticFeedback(50); show(cur+1); };
            if(isMain) {
                const dots = document.getElementById('carouselDots');
                slides.forEach((_, i) => { const d = document.createElement('div'); d.className = 'dot' + (i===0?' active':''); d.onclick = () => show(i); dots.appendChild(d); });
            }
        }
        function updateDots(idx) { document.querySelectorAll('.dot').forEach((d, i) => d.classList.toggle('active', i === idx)); }
        initCarousel('stage', 'prevBtn', 'nextBtn', true);
        initCarousel('perspectiveStage', 'prevPerspectiveBtn', 'nextPerspectiveBtn', false);

        function openMainCarouselLightbox() { const img = document.querySelector('#stage .slide.active img'); document.getElementById('lightboxImage').src = img.src; document.getElementById('lightbox').style.display='flex'; }
        function openCurrentPerspectiveLightbox() { const imgs = document.querySelector('#perspectiveStage .slide.active').querySelectorAll('img'); document.getElementById('dualImageA').src = imgs[0].src; document.getElementById('dualImageB').src = imgs[1].src; document.getElementById('dualLightbox').style.display='flex'; }
        document.querySelectorAll('#photoCollage img').forEach(img => img.onclick = () => { document.getElementById('lightboxImage').src = img.src; document.getElementById('lightbox').style.display='flex'; });
        window.onscroll = () => { const s = document.documentElement.scrollTop, h = document.documentElement.scrollHeight - document.documentElement.clientHeight; document.getElementById('progressBar').style.width = (s/h)*100 + "%"; };
    </script>
</body>
</html>
